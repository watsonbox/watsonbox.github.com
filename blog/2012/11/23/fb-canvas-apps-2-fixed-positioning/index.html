<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.7.1 -->
<title>FB Canvas Apps #2: Fixed Positioning | Watsonbox</title>
<meta name="generator" content="Jekyll v4.1.1" />
<meta property="og:title" content="FB Canvas Apps #2: Fixed Positioning" />
<meta name="author" content="Howard Wilson" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Recently I was asked to add a fixed position ‘tab’ to the left side of a Facebook canvas app, for example like the Get Satisfaction ‘Community’ tab. Normally this would be a simple case of using position: fixed, but not in this case because Facebook canvas apps live inside iFrames. Facebook resizes this iFrame to fit its content, meaning that the main browser scrollbar is used to scroll around the page rather than the iFrame’s scrollbar. However, fixed position elements are fixed relative to the iFrame, not the main document. Since the iFrame never actually scrolls, the fixed element stays put. The solution is to use a little javascript to scroll the fixed element relative to the Facebook scroll position at a fixed interval. This gives a slightly different user experience but is the best approach I’ve found so far. $.fn.pseudoFixed = -&gt; top = this.position().top window.setInterval( =&gt; FB.Canvas.getPageInfo((info) =&gt; this.animate({ top: info.scrollTop + top })), 1000 ) $(&#39;[data-behavior~=pseudo-fixed]&#39;).pseudoFixed() &lt;div data-behavior=&quot;pseudo-fixed&quot; style=&quot;position: fixed; left: 0; top: 150px&quot;&gt;...&lt;/div&gt;" />
<meta property="og:description" content="Recently I was asked to add a fixed position ‘tab’ to the left side of a Facebook canvas app, for example like the Get Satisfaction ‘Community’ tab. Normally this would be a simple case of using position: fixed, but not in this case because Facebook canvas apps live inside iFrames. Facebook resizes this iFrame to fit its content, meaning that the main browser scrollbar is used to scroll around the page rather than the iFrame’s scrollbar. However, fixed position elements are fixed relative to the iFrame, not the main document. Since the iFrame never actually scrolls, the fixed element stays put. The solution is to use a little javascript to scroll the fixed element relative to the Facebook scroll position at a fixed interval. This gives a slightly different user experience but is the best approach I’ve found so far. $.fn.pseudoFixed = -&gt; top = this.position().top window.setInterval( =&gt; FB.Canvas.getPageInfo((info) =&gt; this.animate({ top: info.scrollTop + top })), 1000 ) $(&#39;[data-behavior~=pseudo-fixed]&#39;).pseudoFixed() &lt;div data-behavior=&quot;pseudo-fixed&quot; style=&quot;position: fixed; left: 0; top: 150px&quot;&gt;...&lt;/div&gt;" />
<link rel="canonical" href="https://watsonbox.github.com/blog/2012/11/23/fb-canvas-apps-2-fixed-positioning/" />
<meta property="og:url" content="https://watsonbox.github.com/blog/2012/11/23/fb-canvas-apps-2-fixed-positioning/" />
<meta property="og:site_name" content="Watsonbox" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2012-11-23T13:32:00+01:00" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="FB Canvas Apps #2: Fixed Positioning" />
<script type="application/ld+json">
{"url":"https://watsonbox.github.com/blog/2012/11/23/fb-canvas-apps-2-fixed-positioning/","headline":"FB Canvas Apps #2: Fixed Positioning","dateModified":"2012-11-23T13:32:00+01:00","datePublished":"2012-11-23T13:32:00+01:00","author":{"@type":"Person","name":"Howard Wilson"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://watsonbox.github.com/blog/2012/11/23/fb-canvas-apps-2-fixed-positioning/"},"description":"Recently I was asked to add a fixed position ‘tab’ to the left side of a Facebook canvas app, for example like the Get Satisfaction ‘Community’ tab. Normally this would be a simple case of using position: fixed, but not in this case because Facebook canvas apps live inside iFrames. Facebook resizes this iFrame to fit its content, meaning that the main browser scrollbar is used to scroll around the page rather than the iFrame’s scrollbar. However, fixed position elements are fixed relative to the iFrame, not the main document. Since the iFrame never actually scrolls, the fixed element stays put. The solution is to use a little javascript to scroll the fixed element relative to the Facebook scroll position at a fixed interval. This gives a slightly different user experience but is the best approach I’ve found so far. $.fn.pseudoFixed = -&gt; top = this.position().top window.setInterval( =&gt; FB.Canvas.getPageInfo((info) =&gt; this.animate({ top: info.scrollTop + top })), 1000 ) $(&#39;[data-behavior~=pseudo-fixed]&#39;).pseudoFixed() &lt;div data-behavior=&quot;pseudo-fixed&quot; style=&quot;position: fixed; left: 0; top: 150px&quot;&gt;...&lt;/div&gt;","@type":"BlogPosting","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/css/style.css"><link type="application/atom+xml" rel="alternate" href="https://watsonbox.github.com/feed.xml" title="Watsonbox" /><script async src="https://www.googletagmanager.com/gtag/js?id=UA-31898875-1"></script>
<script>
  window['ga-disable-UA-31898875-1'] = window.doNotTrack === "1" || navigator.doNotTrack === "1" || navigator.doNotTrack === "yes" || navigator.msDoNotTrack === "1";
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-31898875-1');
</script>
<!-- From https://realfavicongenerator.net/ -->
<link rel="apple-touch-icon" sizes="120x120" href="/assets/images/favicon/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/assets/images/favicon/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/assets/images/favicon/favicon-16x16.png">
<link rel="manifest" href="/assets/images/favicon/site.webmanifest">
<link rel="mask-icon" href="/assets/images/favicon/safari-pinned-tab.svg" color="#3c3c3c">
<link rel="shortcut icon" href="/assets/images/favicon/favicon.ico">
<meta name="msapplication-TileColor" content="#3c3c3c">
<meta name="msapplication-config" content="/assets/images/favicon/browserconfig.xml">
<meta name="theme-color" content="#3c3c3c">
</head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/">
      <img src="/assets/images/watsonbox.png" />
    </a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/">Blog</a><a class="page-link" href="/archive/">Archive</a><a class="page-link" href="/tags/">Tags</a><a class="page-link" href="/about/">About</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <article class="post h-entry" itemscope itemtype="http://schema.org/BlogPosting">

  <header class="post-header">
    <h1 class="post-title p-name" itemprop="name headline">FB Canvas Apps #2: Fixed Positioning</h1>
    <p class="post-meta"><time class="dt-published" datetime="2012-11-23T13:32:00+01:00" itemprop="datePublished">
        Nov 23, 2012
      </time> |
        
          <code class="highlighter-rouge"><a class="post-tag" href="/tags/#facebook">Facebook</a></code>
        
          <code class="highlighter-rouge"><a class="post-tag" href="/tags/#jquery">jQuery</a></code>
        
          <code class="highlighter-rouge"><a class="post-tag" href="/tags/#coffeescript">CoffeeScript</a></code>
        
      • 
          <span itemprop="author" itemscope itemtype="http://schema.org/Person">
            <span class="p-author h-card" itemprop="name">Howard Wilson</span></span></p>
  </header>

  <div class="post-content e-content" itemprop="articleBody">
    <p>Recently I was asked to add a fixed position ‘tab’ to the left side of a Facebook canvas app, for example like the <a href="https://getsatisfaction.com/">Get Satisfaction</a> ‘Community’ tab.</p>

<p>Normally this would be a simple case of using <code class="language-plaintext highlighter-rouge">position: fixed</code>, but not in this case because Facebook canvas apps live inside iFrames. Facebook resizes this iFrame to fit its content, meaning that the main browser scrollbar is used to scroll around the page rather than the iFrame’s scrollbar. However, fixed position elements are fixed relative to the iFrame, not the main document. Since the iFrame never actually scrolls, the fixed element stays put.</p>

<p>The solution is to use a little javascript to scroll the fixed element relative to the Facebook scroll position at a fixed interval. This gives a slightly different user experience but is the best approach I’ve found so far.</p>

<div class="language-coffeescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">$</span><span class="p">.</span><span class="na">fn</span><span class="p">.</span><span class="na">pseudoFixed</span> <span class="o">=</span> <span class="o">-&gt;</span>
  <span class="nx">top</span> <span class="o">=</span> <span class="k">this</span><span class="p">.</span><span class="na">position</span><span class="p">().</span><span class="na">top</span>

  <span class="nb">window</span><span class="p">.</span><span class="na">setInterval</span><span class="p">(</span>
    <span class="o">=&gt;</span> <span class="nx">FB</span><span class="p">.</span><span class="na">Canvas</span><span class="p">.</span><span class="na">getPageInfo</span><span class="p">((</span><span class="nx">info</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="k">this</span><span class="p">.</span><span class="na">animate</span><span class="p">({</span> <span class="na">top</span><span class="o">:</span> <span class="nx">info</span><span class="p">.</span><span class="na">scrollTop</span> <span class="o">+</span> <span class="nx">top</span> <span class="p">})),</span>
    <span class="mi">1000</span>
  <span class="p">)</span>

<span class="nx">$</span><span class="p">(</span><span class="s">'[data-behavior~=pseudo-fixed]'</span><span class="p">).</span><span class="na">pseudoFixed</span><span class="p">()</span>
</code></pre></div></div>

<div class="language-html highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;div</span> <span class="na">data-behavior=</span><span class="s">"pseudo-fixed"</span> <span class="na">style=</span><span class="s">"position: fixed; left: 0; top: 150px"</span><span class="nt">&gt;</span>...<span class="nt">&lt;/div&gt;</span>
</code></pre></div></div>

  </div><div id="disqus_thread"></div>
  <script>
    var disqus_config = function () {
      this.page.url = 'https://watsonbox.github.com/blog/2012/11/23/fb-canvas-apps-2-fixed-positioning/';
      this.page.identifier = 'https://watsonbox.github.com/blog/2012/11/23/fb-canvas-apps-2-fixed-positioning/';
    };

    (function() {
      var d = document, s = d.createElement('script');

      s.src = 'https://watsonbox.disqus.com/embed.js';

      s.setAttribute('data-timestamp', +new Date());
      (d.head || d.body).appendChild(s);
    })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript><a class="u-url" href="/blog/2012/11/23/fb-canvas-apps-2-fixed-positioning/" hidden></a>
</article>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col">
        <p class="feed-subscribe">
          <a href="/feed.xml">
            <svg class="svg-icon orange">
              <use xlink:href="/assets/minima-social-icons.svg#rss"></use>
            </svg><span>Subscribe</span>
          </a>
        </p>
        <ul class="contact-list">
          <li class="p-name">Howard Wilson</li>
          <li><a class="u-email" href="mailto:howard@watsonbox.net">howard@watsonbox.net</a></li>
        </ul>
      </div>
      <div class="footer-col">
        <p>Watsonbox Blog
</p>
      </div>
    </div>

    <div class="social-links"><ul class="social-media-list"><li><a rel="me" href="https://github.com/watsonbox" title="watsonbox"><svg class="svg-icon grey"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg></a></li><li><a rel="me" href="https://www.linkedin.com/in/watsonbox" title="watsonbox"><svg class="svg-icon grey"><use xlink:href="/assets/minima-social-icons.svg#linkedin"></use></svg></a></li><li><a rel="me" href="https://twitter.com/jekyllrb" title="jekyllrb"><svg class="svg-icon grey"><use xlink:href="/assets/minima-social-icons.svg#twitter"></use></svg></a></li></ul>
</div>

  </div>

</footer>
</body>

</html>
