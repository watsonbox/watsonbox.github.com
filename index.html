<!DOCTYPE html>
<html lang="en"><head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1"><!-- Begin Jekyll SEO tag v2.7.1 -->
<title>Blog | Watsonbox</title>
<meta name="generator" content="Jekyll v4.1.1" />
<meta property="og:title" content="Blog" />
<meta name="author" content="Howard Wilson" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="Watsonbox Blog" />
<meta property="og:description" content="Watsonbox Blog" />
<meta property="og:site_name" content="Watsonbox" />
<meta name="twitter:card" content="summary" />
<meta property="twitter:title" content="Blog" />
<script type="application/ld+json">
{"url":"/","headline":"Blog","author":{"@type":"Person","name":"Howard Wilson"},"description":"Watsonbox Blog","@type":"WebSite","name":"Watsonbox","@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->
<link rel="stylesheet" href="/assets/css/style.css"><link type="application/atom+xml" rel="alternate" href="/feed.xml" title="Watsonbox" />
</head>
<body><header class="site-header" role="banner">

  <div class="wrapper"><a class="site-title" rel="author" href="/">
      <img src="/assets/images/watsonbox.png" />
    </a><nav class="site-nav">
        <input type="checkbox" id="nav-trigger" class="nav-trigger" />
        <label for="nav-trigger">
          <span class="menu-icon">
            <svg viewBox="0 0 18 15" width="18px" height="15px">
              <path d="M18,1.484c0,0.82-0.665,1.484-1.484,1.484H1.484C0.665,2.969,0,2.304,0,1.484l0,0C0,0.665,0.665,0,1.484,0 h15.032C17.335,0,18,0.665,18,1.484L18,1.484z M18,7.516C18,8.335,17.335,9,16.516,9H1.484C0.665,9,0,8.335,0,7.516l0,0 c0-0.82,0.665-1.484,1.484-1.484h15.032C17.335,6.031,18,6.696,18,7.516L18,7.516z M18,13.516C18,14.335,17.335,15,16.516,15H1.484 C0.665,15,0,14.335,0,13.516l0,0c0-0.82,0.665-1.483,1.484-1.483h15.032C17.335,12.031,18,12.695,18,13.516L18,13.516z"/>
            </svg>
          </span>
        </label>

        <div class="trigger"><a class="page-link" href="/">Blog</a><a class="page-link" href="/tags/">Tags</a><a class="page-link" href="/about/">About</a></div>
      </nav></div>
</header>
<main class="page-content" aria-label="Content">
      <div class="wrapper">
        <div class="home">
  
<ul class="post-list"><li><span class="post-meta">
          <time class="dt-published" datetime="2015-02-16T17:45:42+01:00" itemprop="datePublished">
            Feb 16, 2015
          </time>
        </span>
        <h3>
          <a class="post-link" href="/blog/2015/02/16/googleplacesautocomplete-cocoapod/">
            GooglePlacesAutocomplete CocoaPod
          </a>
        </h3><p><a href="https://github.com/watsonbox/ios_google_places_autocomplete">GooglePlacesAutocomplete</a> is a simple <a href="https://developers.google.com/places/documentation/autocomplete">Google Places API</a> autocompleting address entry view for iOS devices, written in <a href="https://developer.apple.com/swift/">Swift</a>.</p>

<p>There are already a couple of solutions out there for this. GooglePlacesAutocomplete is different because it is 100% Swift, and aims to provide the simplest possible method of entering validated, autocompleted addresses.</p>

<p>It’s available as a CocoaPod - installation instructions <a href="https://github.com/watsonbox/ios_google_places_autocomplete#installation">here</a>. Feedback and contributions welcome!</p>

<h3 id="screenshots">Screenshots</h3>

<p><img width="300" src="https://raw.githubusercontent.com/watsonbox/ios_google_places_autocomplete/master/Screenshots/view.png" />    <img width="300" src="https://raw.githubusercontent.com/watsonbox/ios_google_places_autocomplete/master/Screenshots/search.png" /></p>

          </li><li><span class="post-meta">
          <time class="dt-published" datetime="2014-10-24T15:42:02+02:00" itemprop="datePublished">
            Oct 24, 2014
          </time>
        </span>
        <h3>
          <a class="post-link" href="/blog/2014/10/24/ruby-speech-recognition-with-pocketsphinx/">
            Ruby speech recognition with Pocketsphinx
          </a>
        </h3><p><a href="https://github.com/watsonbox/pocketsphinx-ruby">pocketsphinx-ruby</a> is a high-level Ruby wrapper for the pocketsphinx C API. It uses the Ruby Foreign Function Interface (FFI) to directly load and call functions in libpocketsphinx, as well as libsphinxav for recoding live audio using a number of different audio backends.</p>

<p>The goal of the project is to make it as easy as possible for the Ruby community to experiment with speech recognition, in particular for use in grammar-based command and control applications. Setting up a real time recognizer is as simple as:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">configuration</span> <span class="o">=</span> <span class="no">Pocketsphinx</span><span class="o">::</span><span class="no">Configuration</span><span class="o">::</span><span class="no">Grammar</span><span class="p">.</span><span class="nf">new</span> <span class="k">do</span>
  <span class="n">sentence</span> <span class="s2">"Go forward ten meters"</span>
  <span class="n">sentence</span> <span class="s2">"Go backward ten meters"</span>
<span class="k">end</span>

<span class="no">Pocketsphinx</span><span class="o">::</span><span class="no">LiveSpeechRecognizer</span><span class="p">.</span><span class="nf">new</span><span class="p">(</span><span class="n">configuration</span><span class="p">).</span><span class="nf">recognize</span> <span class="k">do</span> <span class="o">|</span><span class="n">speech</span><span class="o">|</span>
  <span class="nb">puts</span> <span class="n">speech</span>
<span class="k">end</span>
</code></pre></div></div>

<p>This library supports Ruby MRI 1.9.3+, JRuby, and Rubinius. It depends on the current development versions of Pocketsphinx and Sphinxbase - there are <a href="https://github.com/watsonbox/homebrew-cmu-sphinx">Homebrew recipes</a> available for a quick start on OSX.</p>

          </li><li><span class="post-meta">
          <time class="dt-published" datetime="2014-09-22T12:32:41+02:00" itemprop="datePublished">
            Sep 22, 2014
          </time>
        </span>
        <h3>
          <a class="post-link" href="/blog/2014/09/22/mean-dot-io-on-dokku/">
            Mean.io on Dokku
          </a>
        </h3><p>Here’s how I set up the <a href="http://mean.io/">Mean.io</a> stack for deployment with <a href="https://github.com/progrium/dokku">Dokku</a>.</p>


          
            <a href="/blog/2014/09/22/mean-dot-io-on-dokku/">Read More</a>
          </li><li><span class="post-meta">
          <time class="dt-published" datetime="2014-08-31T14:35:02+02:00" itemprop="datePublished">
            Aug 31, 2014
          </time>
        </span>
        <h3>
          <a class="post-link" href="/blog/2014/08/31/getting-started-with-dokku/">
            Getting Started with Dokku
          </a>
        </h3><p><em>UPDATE: Some recent changes to <a href="https://github.com/ohardy/dokku-mariadb">ohardy/dokku-mariadb</a> have resolved the problems with losing DB links on reboot.</em></p>

<p>I decided to jump in and set up my own mini-Heroku with <a href="https://www.docker.com/">Docker</a> and <a href="https://github.com/progrium/dokku">Dokku</a> as seems to be the fashion at the moment. Here are my thoughts and a few of the issues I hit along the way. Using Dokku v0.2.3.</p>

<p>I <a href="https://www.digitalocean.com/community/tutorials/how-to-use-the-digitalocean-dokku-application">installed Dokku on Digital Ocean</a>. It doesn’t have to be Digital Ocean but they certainly make it easy. Then <a href="https://www.digitalocean.com/community/tutorials/how-to-add-swap-on-ubuntu-14-04">added some swap space</a>, too. Save some typing by setting up an alias:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">alias </span><span class="nv">dokku</span><span class="o">=</span><span class="s1">'ssh -t dokku@yourvps.tld
</span></code></pre></div></div>


          
            <a href="/blog/2014/08/31/getting-started-with-dokku/">Read More</a>
          </li><li><span class="post-meta">
          <time class="dt-published" datetime="2014-06-23T17:12:21+02:00" itemprop="datePublished">
            Jun 23, 2014
          </time>
        </span>
        <h3>
          <a class="post-link" href="/blog/2014/06/23/aggregation-for-ember-data-async-relationships/">
            Aggregation for Ember Data Async Relationships
          </a>
        </h3><p>Ember.js has <a href="http://emberjs.com/guides/object-model/computed-properties-and-aggregate-data/">computed properties</a> for aggregating data which are automatically re-calculated when the source data set changes. But what if we want to display aggregate data from an async relationship in a list view? We might have the following:</p>

<div class="language-coffeescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">App</span><span class="p">.</span><span class="na">Invoice</span> <span class="o">=</span> <span class="nx">DS</span><span class="p">.</span><span class="na">Model</span><span class="p">.</span><span class="na">extend</span>
  <span class="na">lineItems</span><span class="o">:</span> <span class="nx">DS</span><span class="p">.</span><span class="na">hasMany</span><span class="p">(</span><span class="s">'lineItem'</span><span class="p">,</span> <span class="p">{</span> <span class="na">async</span><span class="o">:</span> <span class="no">true</span> <span class="p">})</span>

  <span class="na">lineItemAmounts</span><span class="o">:</span> <span class="nx">Ember</span><span class="p">.</span><span class="na">computed</span><span class="p">.</span><span class="na">mapBy</span><span class="p">(</span><span class="s">'lineItems'</span><span class="p">,</span> <span class="s">'amount'</span><span class="p">)</span>
  <span class="na">amount</span><span class="o">:</span> <span class="nx">Ember</span><span class="p">.</span><span class="na">computed</span><span class="p">.</span><span class="na">sum</span><span class="p">(</span><span class="s">'lineItemAmounts'</span><span class="p">)</span>
</code></pre></div></div>

<p>Each <code class="language-plaintext highlighter-rouge">App.Invoice</code> has a bunch of <code class="language-plaintext highlighter-rouge">App.LineItem</code>s, and calculates its own amount by summing up their individual amounts. However, each time an invoice is rendered, all of the line items will be fetched from the server in order to make this calculation.</p>

<p>What we can do instead is send the aggregate figure from the server along with the invoice. It might be calculated on the fly (with a <code class="language-plaintext highlighter-rouge">group by</code> query, for example), or maintained along with the invoice. Here’s an approach that does exactly this, but will switch to using the real ember data objects once they have been loaded:</p>

<div class="language-coffeescript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nx">App</span><span class="p">.</span><span class="na">Invoice</span> <span class="o">=</span> <span class="nx">DS</span><span class="p">.</span><span class="na">Model</span><span class="p">.</span><span class="na">extend</span>
  <span class="na">subtotal</span><span class="o">:</span> <span class="nx">DS</span><span class="p">.</span><span class="na">attr</span><span class="p">(</span><span class="s">'number'</span><span class="p">)</span>
  <span class="na">lineItems</span><span class="o">:</span> <span class="nx">DS</span><span class="p">.</span><span class="na">hasMany</span><span class="p">(</span><span class="s">'lineItem'</span><span class="p">,</span> <span class="p">{</span> <span class="na">async</span><span class="o">:</span> <span class="no">true</span> <span class="p">})</span>

  <span class="na">lineItemAmounts</span><span class="o">:</span> <span class="nx">Ember</span><span class="p">.</span><span class="na">computed</span><span class="p">.</span><span class="na">mapBy</span><span class="p">(</span><span class="s">'lineItems'</span><span class="p">,</span> <span class="s">'amount'</span><span class="p">)</span>
  <span class="na">lineItemAmountsSum</span><span class="o">:</span> <span class="nx">Ember</span><span class="p">.</span><span class="na">computed</span><span class="p">.</span><span class="na">sum</span><span class="p">(</span><span class="s">'lineItemAmounts'</span><span class="p">)</span>

  <span class="c1"># Uses subtotal until async lineItems become available</span>
  <span class="na">amount</span><span class="o">:</span> <span class="p">(</span><span class="o">-&gt;</span>
    <span class="k">if</span> <span class="vi">@</span><span class="na">cacheFor</span><span class="p">(</span><span class="s">'lineItems'</span><span class="p">)</span>
      <span class="vi">@</span><span class="na">get</span><span class="p">(</span><span class="s">'lineItemAmountsSum'</span><span class="p">)</span>
    <span class="k">else</span>
      <span class="vi">@</span><span class="na">get</span><span class="p">(</span><span class="s">'subtotal'</span><span class="p">)</span>
  <span class="p">).</span><span class="na">property</span><span class="p">(</span><span class="s">'lineItems.@each.amount'</span><span class="p">)</span>
</code></pre></div></div>

<p>In this case <code class="language-plaintext highlighter-rouge">subtotal</code> is the aggregated amount from the server.</p>

          </li></ul></div>

      </div>
    </main><footer class="site-footer h-card">
  <data class="u-url" href="/"></data>

  <div class="wrapper">

    <div class="footer-col-wrapper">
      <div class="footer-col">
        <p class="feed-subscribe">
          <a href="/feed.xml">
            <svg class="svg-icon orange">
              <use xlink:href="/assets/minima-social-icons.svg#rss"></use>
            </svg><span>Subscribe</span>
          </a>
        </p>
        <ul class="contact-list">
          <li class="p-name">Howard Wilson</li>
          <li><a class="u-email" href="mailto:howard@watsonbox.net">howard@watsonbox.net</a></li>
        </ul>
      </div>
      <div class="footer-col">
        <p>Watsonbox Blog
</p>
      </div>
    </div>

    <div class="social-links"><ul class="social-media-list"><li><a rel="me" href="https://github.com/watsonbox" title="watsonbox"><svg class="svg-icon grey"><use xlink:href="/assets/minima-social-icons.svg#github"></use></svg></a></li><li><a rel="me" href="https://www.linkedin.com/in/watsonbox" title="watsonbox"><svg class="svg-icon grey"><use xlink:href="/assets/minima-social-icons.svg#linkedin"></use></svg></a></li><li><a rel="me" href="https://twitter.com/jekyllrb" title="jekyllrb"><svg class="svg-icon grey"><use xlink:href="/assets/minima-social-icons.svg#twitter"></use></svg></a></li></ul>
</div>

  </div>

</footer>
</body>

</html>
